define("echarts/chart/line",["require","./base","zrender/shape/Polyline","../util/shape/Icon","../util/shape/HalfSmoothPolygon","../component/axis","../component/grid","../component/dataZoom","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../chart"],function(t){function e(t,e,i,s,r){o.call(this,t,e,i,s,r),this.refresh(s)}function i(t,e,i){var o=e.x,s=e.y,n=e.width,a=e.height,h=a/2;e.symbol.match("empty")&&(t.fillStyle="#fff"),e.brushType="both";var l=e.symbol.replace("empty","").toLowerCase();l.match("star")?(h=l.replace("star","")-0||5,s-=1,l="star"):("rectangle"===l||"arrow"===l)&&(o+=(n-a)/2,n=a);var d="";if(l.match("image")&&(d=l.replace(new RegExp("^image:\\/\\/"),""),l="image",o+=Math.round((n-a)/2)-1,n=a+=2),l=r.prototype.iconLibrary[l]){var c=e.x,p=e.y;t.moveTo(c,p+h),t.lineTo(c+5,p+h),t.moveTo(c+e.width-5,p+h),t.lineTo(c+e.width,p+h);var u=this;l(t,{x:o+4,y:s+4,width:n-8,height:a-8,n:h,image:d},function(){u.modSelf(),i()})}else t.moveTo(o,s+h),t.lineTo(o+n,s+h)}var o=t("./base"),s=t("zrender/shape/Polyline"),r=t("../util/shape/Icon"),n=t("../util/shape/HalfSmoothPolygon");t("../component/axis"),t("../component/grid"),t("../component/dataZoom");var a=t("../config");a.line={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid",shadowColor:"rgba(0,0,0,0)",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},emphasis:{label:{show:!1}}},symbolSize:2,showAllSymbol:!1};var h=t("../util/ecData"),l=t("zrender/tool/util"),d=t("zrender/tool/color");return e.prototype={type:a.CHART_TYPE_LINE,_buildShape:function(){this.finalPLMap={},this._buildPosition()},_buildHorizontal:function(t,e,i,o){for(var s,r,n,a,h,l,d,c,p,u=this.series,g=i[0][0],f=u[g],m=this.component.xAxis.getAxis(f.xAxisIndex||0),y={},_=0,v=e;v>_&&null!=m.getNameByIndex(_);_++){r=m.getCoordByIndex(_);for(var x=0,b=i.length;b>x;x++){s=this.component.yAxis.getAxis(u[i[x][0]].yAxisIndex||0),h=a=d=l=s.getCoord(0);for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],c=f.data[_],p=this.getDataFromOption(c,"-"),y[g]=y[g]||[],o[g]=o[g]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==p?(p>=0?(a-=S>0?s.getCoordSize(p):h-s.getCoord(p),n=a):0>p&&(l+=S>0?s.getCoordSize(p):s.getCoord(p)-d,n=l),y[g].push([r,n,_,m.getNameByIndex(_),r,h]),o[g].min>p&&(o[g].min=p,o[g].minY=n,o[g].minX=r),o[g].max<p&&(o[g].max=p,o[g].maxY=n,o[g].maxX=r),o[g].sum+=p,o[g].counter++):y[g].length>0&&(this.finalPLMap[g]=this.finalPLMap[g]||[],this.finalPLMap[g].push(y[g]),y[g]=[])}a=this.component.grid.getY();for(var z,x=0,b=i.length;b>x;x++)for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],c=f.data[_],p=this.getDataFromOption(c,"-"),"-"==p&&this.deepQuery([c,f,this.option],"calculable")&&(z=this.deepQuery([c,f],"symbolSize"),a+=2*z+5,n=a,this.shapeList.push(this._getCalculableItem(g,_,m.getNameByIndex(_),r,n,"horizontal")))}for(var C in y)y[C].length>0&&(this.finalPLMap[C]=this.finalPLMap[C]||[],this.finalPLMap[C].push(y[C]),y[C]=[]);this._calculMarkMapXY(o,i,"y"),this._buildBorkenLine(t,this.finalPLMap,m,"horizontal")},_buildVertical:function(t,e,i,o){for(var s,r,n,a,h,l,d,c,p,u=this.series,g=i[0][0],f=u[g],m=this.component.yAxis.getAxis(f.yAxisIndex||0),y={},_=0,v=e;v>_&&null!=m.getNameByIndex(_);_++){n=m.getCoordByIndex(_);for(var x=0,b=i.length;b>x;x++){s=this.component.xAxis.getAxis(u[i[x][0]].xAxisIndex||0),h=a=d=l=s.getCoord(0);for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],c=f.data[_],p=this.getDataFromOption(c,"-"),y[g]=y[g]||[],o[g]=o[g]||{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,sum:0,counter:0,average:0},"-"!==p?(p>=0?(a+=S>0?s.getCoordSize(p):s.getCoord(p)-h,r=a):0>p&&(l-=S>0?s.getCoordSize(p):d-s.getCoord(p),r=l),y[g].push([r,n,_,m.getNameByIndex(_),h,n]),o[g].min>p&&(o[g].min=p,o[g].minX=r,o[g].minY=n),o[g].max<p&&(o[g].max=p,o[g].maxX=r,o[g].maxY=n),o[g].sum+=p,o[g].counter++):y[g].length>0&&(this.finalPLMap[g]=this.finalPLMap[g]||[],this.finalPLMap[g].push(y[g]),y[g]=[])}a=this.component.grid.getXend();for(var z,x=0,b=i.length;b>x;x++)for(var S=0,T=i[x].length;T>S;S++)g=i[x][S],f=u[g],c=f.data[_],p=this.getDataFromOption(c,"-"),"-"==p&&this.deepQuery([c,f,this.option],"calculable")&&(z=this.deepQuery([c,f],"symbolSize"),a-=2*z+5,r=a,this.shapeList.push(this._getCalculableItem(g,_,m.getNameByIndex(_),r,n,"vertical")))}for(var C in y)y[C].length>0&&(this.finalPLMap[C]=this.finalPLMap[C]||[],this.finalPLMap[C].push(y[C]),y[C]=[]);this._calculMarkMapXY(o,i,"x"),this._buildBorkenLine(t,this.finalPLMap,m,"vertical")},_buildOther:function(t,e,i,o){for(var s,r=this.series,n={},a=0,h=i.length;h>a;a++)for(var l=0,d=i[a].length;d>l;l++){var c=i[a][l],p=r[c];s=this.component.xAxis.getAxis(p.xAxisIndex||0);var u=this.component.yAxis.getAxis(p.yAxisIndex||0),g=u.getCoord(0);n[c]=n[c]||[],o[c]=o[c]||{min0:Number.POSITIVE_INFINITY,min1:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum0:0,sum1:0,counter0:0,counter1:0,average0:0,average1:0};for(var f=0,m=p.data.length;m>f;f++){var y=p.data[f],_=this.getDataFromOption(y,"-");if(_ instanceof Array){var v=s.getCoord(_[0]),x=u.getCoord(_[1]);n[c].push([v,x,f,_[0],v,g]),o[c].min0>_[0]&&(o[c].min0=_[0],o[c].minY0=x,o[c].minX0=v),o[c].max0<_[0]&&(o[c].max0=_[0],o[c].maxY0=x,o[c].maxX0=v),o[c].sum0+=_[0],o[c].counter0++,o[c].min1>_[1]&&(o[c].min1=_[1],o[c].minY1=x,o[c].minX1=v),o[c].max1<_[1]&&(o[c].max1=_[1],o[c].maxY1=x,o[c].maxX1=v),o[c].sum1+=_[1],o[c].counter1++}}}for(var b in n)n[b].length>0&&(this.finalPLMap[b]=this.finalPLMap[b]||[],this.finalPLMap[b].push(n[b]),n[b]=[]);this._calculMarkMapXY(o,i,"xy"),this._buildBorkenLine(t,this.finalPLMap,s,"other")},_buildBorkenLine:function(t,e,i,o){for(var r,a="other"==o?"horizontal":o,c=this.series,p=t.length-1;p>=0;p--){var u=t[p],g=c[u],f=e[u];if(g.type===this.type&&null!=f)for(var m=this._getBbox(u,a),y=this._sIndex2ColorMap[u],_=this.query(g,"itemStyle.normal.lineStyle.width"),v=this.query(g,"itemStyle.normal.lineStyle.type"),x=this.query(g,"itemStyle.normal.lineStyle.color"),b=this.getItemStyleColor(this.query(g,"itemStyle.normal.color"),u,-1),S=null!=this.query(g,"itemStyle.normal.areaStyle"),T=this.query(g,"itemStyle.normal.areaStyle.color"),z=0,C=f.length;C>z;z++){var w=f[z],L="other"!=o&&this._isLarge(a,w);if(L)w=this._getLargePointList(a,w);else for(var M=0,E=w.length;E>M;M++)r=g.data[w[M][2]],(this.deepQuery([r,g,this.option],"calculable")||this.deepQuery([r,g],"showAllSymbol")||"categoryAxis"===i.type&&i.isMainAxis(w[M][2])&&"none"!=this.deepQuery([r,g],"symbol"))&&this.shapeList.push(this._getSymbol(u,w[M][2],w[M][3],w[M][0],w[M][1],a));var A=new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{miterLimit:_,pointList:w,strokeColor:x||b||y,lineWidth:_,lineType:v,smooth:this._getSmooth(g.smooth),smoothConstraint:m,shadowColor:this.query(g,"itemStyle.normal.lineStyle.shadowColor"),shadowBlur:this.query(g,"itemStyle.normal.lineStyle.shadowBlur"),shadowOffsetX:this.query(g,"itemStyle.normal.lineStyle.shadowOffsetX"),shadowOffsetY:this.query(g,"itemStyle.normal.lineStyle.shadowOffsetY")},hoverable:!1,_main:!0,_seriesIndex:u,_orient:a});if(h.pack(A,c[u],u,0,z,c[u].name),this.shapeList.push(A),S){var k=new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{miterLimit:_,pointList:l.clone(w).concat([[w[w.length-1][4],w[w.length-1][5]],[w[0][4],w[0][5]]]),brushType:"fill",smooth:this._getSmooth(g.smooth),smoothConstraint:m,color:T?T:d.alpha(y,.5)},highlightStyle:{brushType:"fill"},hoverable:!1,_main:!0,_seriesIndex:u,_orient:a});h.pack(k,c[u],u,0,z,c[u].name),this.shapeList.push(k)}}}},_getBbox:function(t,e){var i=this.component.grid.getBbox(),o=this.xMarkMap[t];return null!=o.minX0?[[Math.min(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.min(o.minY0,o.maxY0,o.minY1,o.maxY1)],[Math.max(o.minX0,o.maxX0,o.minX1,o.maxX1),Math.max(o.minY0,o.maxY0,o.minY1,o.maxY1)]]:("horizontal"===e?(i[0][1]=Math.min(o.minY,o.maxY),i[1][1]=Math.max(o.minY,o.maxY)):(i[0][0]=Math.min(o.minX,o.maxX),i[1][0]=Math.max(o.minX,o.maxX)),i)},_isLarge:function(t,e){return e.length<2?!1:"horizontal"===t?Math.abs(e[0][0]-e[1][0])<.5:Math.abs(e[0][1]-e[1][1])<.5},_getLargePointList:function(t,e){var i;i="horizontal"===t?this.component.grid.getWidth():this.component.grid.getHeight();for(var o=e.length,s=[],r=0;i>r;r++)s[r]=e[Math.floor(o/i*r)];return s},_getSmooth:function(t){return t?.3:0},_getCalculableItem:function(t,e,i,o,s,r){var n=this.series,h=n[t].calculableHolderColor||this.ecTheme.calculableHolderColor||a.calculableHolderColor,l=this._getSymbol(t,e,i,o,s,r);return l.style.color=h,l.style.strokeColor=h,l.rotation=[0,0],l.hoverable=!1,l.draggable=!1,l.style.text=void 0,l},_getSymbol:function(t,e,i,o,s,r){var n=this.series,a=n[t],h=a.data[e],l=this.getSymbolShape(a,t,h,e,i,o,s,this._sIndex2ShapeMap[t],this._sIndex2ColorMap[t],"#fff","vertical"===r?"horizontal":"vertical");return l.zlevel=this.getZlevelBase(),l.z=this.getZBase()+1,this.deepQuery([h,a,this.option],"calculable")&&(this.setCalculable(l),l.draggable=!0),l},getMarkCoord:function(t,e){var i=this.series[t],o=this.xMarkMap[t],s=this.component.xAxis.getAxis(i.xAxisIndex),r=this.component.yAxis.getAxis(i.yAxisIndex);if(e.type&&("max"===e.type||"min"===e.type||"average"===e.type)){var n=null!=e.valueIndex?e.valueIndex:null!=o.maxX0?"1":"";return[o[e.type+"X"+n],o[e.type+"Y"+n],o[e.type+"Line"+n],o[e.type+n]]}return["string"!=typeof e.xAxis&&s.getCoordByIndex?s.getCoordByIndex(e.xAxis||0):s.getCoord(e.xAxis||0),"string"!=typeof e.yAxis&&r.getCoordByIndex?r.getCoordByIndex(e.yAxis||0):r.getCoord(e.yAxis||0)]},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()},ontooltipHover:function(t,e){for(var i,o,s=t.seriesIndex,r=t.dataIndex,n=s.length;n--;)if(i=this.finalPLMap[s[n]])for(var a=0,h=i.length;h>a;a++){o=i[a];for(var l=0,d=o.length;d>l;l++)r===o[l][2]&&e.push(this._getSymbol(s[n],o[l][2],o[l][3],o[l][0],o[l][1],"horizontal"))}},addDataAnimation:function(t){for(var e=this.series,i={},o=0,s=t.length;s>o;o++)i[t[o][0]]=t[o];for(var r,n,a,h,l,d,c,o=this.shapeList.length-1;o>=0;o--)if(l=this.shapeList[o]._seriesIndex,i[l]&&!i[l][3]){if(this.shapeList[o]._main&&this.shapeList[o].style.pointList.length>1){if(d=this.shapeList[o].style.pointList,n=Math.abs(d[0][0]-d[1][0]),h=Math.abs(d[0][1]-d[1][1]),c="horizontal"===this.shapeList[o]._orient,i[l][2]){if("half-smooth-polygon"===this.shapeList[o].type){var p=d.length;this.shapeList[o].style.pointList[p-3]=d[p-2],this.shapeList[o].style.pointList[p-3][c?0:1]=d[p-4][c?0:1],this.shapeList[o].style.pointList[p-2]=d[p-1]}this.shapeList[o].style.pointList.pop(),c?(r=n,a=0):(r=0,a=-h)}else{if(this.shapeList[o].style.pointList.shift(),"half-smooth-polygon"===this.shapeList[o].type){var u=this.shapeList[o].style.pointList.pop();c?u[0]=d[0][0]:u[1]=d[0][1],this.shapeList[o].style.pointList.push(u)}c?(r=-n,a=0):(r=0,a=h)}this.zr.modShape(this.shapeList[o].id,{style:{pointList:this.shapeList[o].style.pointList}},!0)}else{if(i[l][2]&&this.shapeList[o]._dataIndex===e[l].data.length-1){this.zr.delShape(this.shapeList[o].id);continue}if(!i[l][2]&&0===this.shapeList[o]._dataIndex){this.zr.delShape(this.shapeList[o].id);continue}}this.shapeList[o].position=[0,0],this.zr.animate(this.shapeList[o].id,"").when(this.query(this.option,"animationDurationUpdate"),{position:[r,a]}).start()}}},r.prototype.iconLibrary.legendLineIcon=i,l.inherits(e,o),t("../chart").define("line",e),e}),define("echarts/util/shape/HalfSmoothPolygon",["require","zrender/shape/Base","zrender/shape/util/smoothBezier","zrender/tool/util","zrender/shape/Polygon"],function(t){function e(t){i.call(this,t)}var i=t("zrender/shape/Base"),o=t("zrender/shape/util/smoothBezier"),s=t("zrender/tool/util");return e.prototype={type:"half-smooth-polygon",buildPath:function(e,i){var s=i.pointList;if(!(s.length<2))if(i.smooth){var r=o(s.slice(0,-2),i.smooth,!1,i.smoothConstraint);e.moveTo(s[0][0],s[0][1]);for(var n,a,h,l=s.length,d=0;l-3>d;d++)n=r[2*d],a=r[2*d+1],h=s[d+1],e.bezierCurveTo(n[0],n[1],a[0],a[1],h[0],h[1]);e.lineTo(s[l-2][0],s[l-2][1]),e.lineTo(s[l-1][0],s[l-1][1]),e.lineTo(s[0][0],s[0][1])}else t("zrender/shape/Polygon").prototype.buildPath(e,i)}},s.inherits(e,i),e});