define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(t){function e(t,e,o,s,a){i.call(this,t,e,o,s,a),this.refresh(s)}var i=t("./base"),o=t("zrender/shape/Polygon");t("../component/polar");var s=t("../config");s.radar={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,polarIndex:0,itemStyle:{normal:{label:{show:!1},lineStyle:{width:2,type:"solid"}},emphasis:{label:{show:!1}}},symbolSize:2};var a=t("../util/ecData"),r=t("zrender/tool/util"),n=t("zrender/tool/color");return e.prototype={type:s.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var t,e=this.series,i=this.component.legend,o=0,a=e.length;a>o;o++)e[o].type===s.CHART_TYPE_RADAR&&(this.serie=this.reformOption(e[o]),this.legendHoverLink=e[o].legendHoverLink||this.legendHoverLink,t=this.serie.name||"",this.selectedMap[t]=i?i.isSelected(t):!0,this.selectedMap[t]&&(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable")&&this._addDropBox(o),this._buildSingleRadar(o),this.buildMark(o)));this.addShapeList()},_buildSingleRadar:function(t){for(var e,i,o,s,a=this.component.legend,r=this.serie.data,n=this.deepQuery(this._queryTarget,"calculable"),h=0;h<r.length;h++)o=r[h].name||"",this.selectedMap[o]=a?a.isSelected(o):!0,this.selectedMap[o]&&(a?(i=a.getColor(o),e=a.getItemShape(o),e&&(e.style.brushType=this.deepQuery([r[h],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",a.setItemShape(o,e))):i=this.zr.getColor(h),s=this._getPointList(this.serie.polarIndex,r[h]),this._addSymbol(s,i,h,t,this.serie.polarIndex),this._addDataShape(s,i,r[h],t,h,n),this._radarDataCounter++)},_getPointList:function(t,e){for(var i,o,s=[],a=this.component.polar,r=0,n=e.value.length;n>r;r++)o=this.getDataFromOption(e.value[r]),i="-"!=o?a.getVector(t,r,o):!1,i&&s.push(i);return s},_addSymbol:function(t,e,i,o,s){for(var r,n=this.series,h=this.component.polar,l=0,d=t.length;d>l;l++)r=this.getSymbolShape(this.deepMerge([n[o].data[i],n[o]]),o,n[o].data[i].value[l],l,h.getIndicatorText(s,l),t[l][0],t[l][1],this._symbol[this._radarDataCounter%this._symbol.length],e,"#fff","vertical"),r.zlevel=this.getZlevelBase(),r.z=this.getZBase()+1,a.set(r,"data",n[o].data[i]),a.set(r,"value",n[o].data[i].value),a.set(r,"dataIndex",i),a.set(r,"special",l),this.shapeList.push(r)},_addDataShape:function(t,e,i,s,r,h){var l=this.series,d=[i,this.serie],c=this.getItemStyleColor(this.deepQuery(d,"itemStyle.normal.color"),s,r,i),p=this.deepQuery(d,"itemStyle.normal.lineStyle.width"),u=this.deepQuery(d,"itemStyle.normal.lineStyle.type"),g=this.deepQuery(d,"itemStyle.normal.areaStyle.color"),f=this.deepQuery(d,"itemStyle.normal.areaStyle"),m={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:f?"both":"stroke",color:g||c||("string"==typeof e?n.alpha(e,.5):e),strokeColor:c||e,lineWidth:p,lineType:u},highlightStyle:{brushType:this.deepQuery(d,"itemStyle.emphasis.areaStyle")||f?"both":"stroke",color:this.deepQuery(d,"itemStyle.emphasis.areaStyle.color")||g||c||("string"==typeof e?n.alpha(e,.5):e),strokeColor:this.getItemStyleColor(this.deepQuery(d,"itemStyle.emphasis.color"),s,r,i)||c||e,lineWidth:this.deepQuery(d,"itemStyle.emphasis.lineStyle.width")||p,lineType:this.deepQuery(d,"itemStyle.emphasis.lineStyle.type")||u}};a.pack(m,l[s],s,i,r,i.name,this.component.polar.getIndicator(l[s].polarIndex)),h&&(m.draggable=!0,this.setCalculable(m)),m=new o(m),this.shapeList.push(m)},_addDropBox:function(t){var e=this.series,i=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[i]){var o=this.component.polar.getDropBox(i);o.zlevel=this.getZlevelBase(),o.z=this.getZBase(),this.setCalculable(o),a.pack(o,e,t,void 0,-1),this.shapeList.push(o),this._dropBoxList[i]=!0}},ondragend:function(t,e){var i=this.series;if(this.isDragend&&t.target){var o=t.target,s=a.get(o,"seriesIndex"),r=a.get(o,"dataIndex");this.component.legend&&this.component.legend.del(i[s].data[r].name),i[s].data.splice(r,1),e.dragOut=!0,e.needRefresh=!0,this.isDragend=!1}},ondrop:function(e,i){var o=this.series;if(this.isDrop&&e.target){var s,r,n=e.target,h=e.dragged,l=a.get(n,"seriesIndex"),d=a.get(n,"dataIndex"),c=this.component.legend;if(-1===d)s={value:a.get(h,"value"),name:a.get(h,"name")},o[l].data.push(s),c&&c.add(s.name,h.style.color||h.style.strokeColor);else{var p=t("../util/accMath");s=o[l].data[d],c&&c.del(s.name),s.name+=this.option.nameConnector+a.get(h,"name"),r=a.get(h,"value");for(var u=0;u<r.length;u++)s.value[u]=p.accAdd(s.value[u],r[u]);c&&c.add(s.name,h.style.color||h.style.strokeColor)}i.dragIn=i.dragIn||!0,this.isDrop=!1}},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()}},r.inherits(e,i),t("../chart").define("radar",e),e}),define("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(t){function e(t,e,o,s,a){i.call(this,t,e,o,s,a),this.refresh(s)}var i=t("./base"),o=t("zrender/shape/Text"),s=t("zrender/shape/Line"),a=t("zrender/shape/Polygon"),r=t("zrender/shape/Circle"),n=t("zrender/shape/Ring"),h=t("../config");h.polar={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,boundaryGap:[0,0],splitNumber:5,name:{show:!0,textStyle:{color:"#333"}},axisLine:{show:!0,lineStyle:{color:"#ccc",width:1,type:"solid"}},axisLabel:{show:!1,textStyle:{color:"#333"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},splitLine:{show:!0,lineStyle:{width:1,color:"#ccc"}},type:"polygon"};var l=t("zrender/tool/util"),d=t("../util/coordinates");return e.prototype={type:h.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var t=0;t<this.polar.length;t++)this._index=t,this.reformOption(this.polar[t]),this._queryTarget=[this.polar[t],this.option],this._createVector(t),this._buildSpiderWeb(t),this._buildText(t),this._adjustIndicatorValue(t),this._addAxisLabel(t);for(var t=0;t<this.shapeList.length;t++)this.zr.addShape(this.shapeList[t])},_createVector:function(t){for(var e,i=this.polar[t],o=this.deepQuery(this._queryTarget,"indicator"),s=o.length,a=i.startAngle,r=2*Math.PI/s,n=this._getRadius(),h=i.__ecIndicator=[],l=0;s>l;l++)e=d.polar2cartesian(n,a*Math.PI/180+r*l),h.push({vector:[e[1],-e[0]]})},_getRadius:function(){var t=this.polar[this._index];return this.parsePercent(t.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(t){var e=this.polar[t],i=e.__ecIndicator,o=e.splitArea,s=e.splitLine,a=this.getCenter(t),r=e.splitNumber,n=s.lineStyle.color,h=s.lineStyle.width,l=s.show,d=this.deepQuery(this._queryTarget,"axisLine");this._addArea(i,r,a,o,n,h,l),d.show&&this._addLine(i,a,d)},_addAxisLabel:function(e){for(var i,s,a,r,s,n,h,d,c,p,u=t("../util/accMath"),g=this.polar[e],f=this.deepQuery(this._queryTarget,"indicator"),m=g.__ecIndicator,y=this.deepQuery(this._queryTarget,"splitNumber"),_=this.getCenter(e),v=0;v<f.length;v++)if(i=this.deepQuery([f[v],g,this.option],"axisLabel"),i.show){var x=this.deepQuery([i,g,this.option],"textStyle"),b=this.deepQuery([i,g],"formatter");if(a={},a.textFont=this.getFont(x),a.color=x.color,a=l.merge(a,i),a.lineWidth=a.width,s=m[v].vector,n=m[v].value,d=v/f.length*2*Math.PI,c=i.offset||10,p=i.interval||0,!n)return;for(var S=1;y>=S;S+=p+1)r=l.merge({},a),h=u.accAdd(n.min,u.accMul(n.step,S)),h="function"==typeof b?b(h):"string"==typeof b?b.replace("{a}","{a0}").replace("{a0}",h):this.numAddCommas(h),r.text=h,r.x=S*s[0]/y+Math.cos(d)*c+_[0],r.y=S*s[1]/y+Math.sin(d)*c+_[1],this.shapeList.push(new o({zlevel:this.getZlevelBase(),z:this.getZBase(),style:r,draggable:!1,hoverable:!1}))}},_buildText:function(t){for(var e,i,s,a,r,n,h,l=this.polar[t],d=l.__ecIndicator,c=this.deepQuery(this._queryTarget,"indicator"),p=this.getCenter(t),u=0,g=0,f=0;f<c.length;f++)a=this.deepQuery([c[f],l,this.option],"name"),a.show&&(h=this.deepQuery([a,l,this.option],"textStyle"),i={},i.textFont=this.getFont(h),i.color=h.color,i.text="function"==typeof a.formatter?a.formatter.call(this.myChart,c[f].text,f):"string"==typeof a.formatter?a.formatter.replace("{value}",c[f].text):c[f].text,d[f].text=i.text,e=d[f].vector,s=Math.round(e[0])>0?"left":Math.round(e[0])<0?"right":"center",null==a.margin?e=this._mapVector(e,p,1.1):(n=a.margin,u=e[0]>0?n:-n,g=e[1]>0?n:-n,u=0===e[0]?0:u,g=0===e[1]?0:g,e=this._mapVector(e,p,1)),i.textAlign=s,i.x=e[0]+u,i.y=e[1]+g,r=a.rotate?[a.rotate/180*Math.PI,e[0],e[1]]:[0,0,0],this.shapeList.push(new o({zlevel:this.getZlevelBase(),z:this.getZBase(),style:i,draggable:!1,hoverable:!1,rotation:r})))},getIndicatorText:function(t,e){return this.polar[t]&&this.polar[t].__ecIndicator[e]&&this.polar[t].__ecIndicator[e].text},getDropBox:function(t){var e,i,t=t||0,o=this.polar[t],s=this.getCenter(t),a=o.__ecIndicator,r=a.length,n=[],h=o.type;if("polygon"==h){for(var l=0;r>l;l++)e=a[l].vector,n.push(this._mapVector(e,s,1.2));i=this._getShape(n,"fill","rgba(0,0,0,0)","",1)}else"circle"==h&&(i=this._getCircle("",1,1.2,s,"fill","rgba(0,0,0,0)"));return i},_addArea:function(t,e,i,o,s,a,r){for(var n,h,l,d,c=this.deepQuery(this._queryTarget,"type"),p=0;e>p;p++)h=(e-p)/e,r&&("polygon"==c?(d=this._getPointList(t,h,i),n=this._getShape(d,"stroke","",s,a)):"circle"==c&&(n=this._getCircle(s,a,h,i,"stroke")),this.shapeList.push(n)),o.show&&(l=(e-p-1)/e,this._addSplitArea(t,o,h,l,i,p))},_getCircle:function(t,e,i,o,s,a){var n=this._getRadius();return new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:o[0],y:o[1],r:n*i,brushType:s,strokeColor:t,lineWidth:e,color:a},hoverable:!1,draggable:!1})},_getRing:function(t,e,i,o){var s=this._getRadius();return new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:o[0],y:o[1],r:e*s,r0:i*s,color:t,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(t,e,i){for(var o,s=[],a=t.length,r=0;a>r;r++)o=t[r].vector,s.push(this._mapVector(o,i,e));return s},_getShape:function(t,e,i,o,s){return new a({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:e,color:i,strokeColor:o,lineWidth:s},hoverable:!1,draggable:!1})},_addSplitArea:function(t,e,i,o,s,a){var r,n,h,l,d,c=t.length,p=e.areaStyle.color,u=[],c=t.length,g=this.deepQuery(this._queryTarget,"type");if("string"==typeof p&&(p=[p]),n=p.length,r=p[a%n],"polygon"==g)for(var f=0;c>f;f++)u=[],h=t[f].vector,l=t[(f+1)%c].vector,u.push(this._mapVector(h,s,i)),u.push(this._mapVector(h,s,o)),u.push(this._mapVector(l,s,o)),u.push(this._mapVector(l,s,i)),d=this._getShape(u,"fill",r,"",1),this.shapeList.push(d);else"circle"==g&&(d=this._getRing(r,i,o,s),this.shapeList.push(d))},_mapVector:function(t,e,i){return[t[0]*i+e[0],t[1]*i+e[1]]},getCenter:function(t){var t=t||0;return this.parseCenter(this.zr,this.polar[t].center)},_addLine:function(t,e,i){for(var o,s,a=t.length,r=i.lineStyle,n=r.color,h=r.width,l=r.type,d=0;a>d;d++)s=t[d].vector,o=this._getLine(e[0],e[1],s[0]+e[0],s[1]+e[1],n,h,l),this.shapeList.push(o)},_getLine:function(t,e,i,o,a,r,n){return new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:t,yStart:e,xEnd:i,yEnd:o,strokeColor:a,lineWidth:r,lineType:n},hoverable:!1})},_adjustIndicatorValue:function(e){for(var i,o,s,a=this.polar[e],r=this.deepQuery(this._queryTarget,"indicator"),n=r.length,h=a.__ecIndicator,l=this._getSeriesData(e),d=a.boundaryGap,c=a.splitNumber,p=a.scale,u=t("../util/smartSteps"),g=0;n>g;g++){if("number"==typeof r[g].max)i=r[g].max,o=r[g].min||0,s={max:i,min:o};else{var f=this._findValue(l,g,c,d);o=f.min,i=f.max}!p&&o>=0&&i>=0&&(o=0),!p&&0>=o&&0>=i&&(i=0);var m=u(o,i,c,s);h[g].value={min:m.min,max:m.max,step:m.step}}},_getSeriesData:function(t){for(var e,i,o,s=[],a=this.component.legend,r=0;r<this.series.length;r++)if(e=this.series[r],e.type==h.CHART_TYPE_RADAR){i=e.data||[];for(var n=0;n<i.length;n++)o=this.deepQuery([i[n],e,this.option],"polarIndex")||0,o!=t||a&&!a.isSelected(i[n].name)||s.push(i[n])}return s},_findValue:function(t,e,i,o){function s(t){(t>a||void 0===a)&&(a=t),(r>t||void 0===r)&&(r=t)}var a,r,n;if(t&&0!==t.length){if(1==t.length&&(r=0),1!=t.length)for(var h=0;h<t.length;h++)s(this.getDataFromOption(t[h].value[e]));else{n=t[0];for(var h=0;h<n.value.length;h++)s(this.getDataFromOption(n.value[h]))}var l=Math.abs(a-r);return r-=Math.abs(l*o[0]),a+=Math.abs(l*o[1]),r===a&&(0===a?a=1:a>0?r=a/i:a/=i),{max:a,min:r}}},getVector:function(t,e,i){t=t||0,e=e||0;var o=this.polar[t].__ecIndicator;if(!(e>=o.length)){var s,a=this.polar[t].__ecIndicator[e],r=this.getCenter(t),n=a.vector,h=a.value.max,l=a.value.min;if("undefined"==typeof i)return r;switch(i){case"min":i=l;break;case"max":i=h;break;case"center":i=(h+l)/2}return s=h!=l?(i-l)/(h-l):.5,this._mapVector(n,r,s)}},isInside:function(t){var e=this.getNearestIndex(t);return e?e.polarIndex:-1},getNearestIndex:function(t){for(var e,i,o,s,a,r,n,h,l,c=0;c<this.polar.length;c++){if(e=this.polar[c],i=this.getCenter(c),t[0]==i[0]&&t[1]==i[1])return{polarIndex:c,valueIndex:0};if(o=this._getRadius(),a=e.startAngle,r=e.indicator,n=r.length,h=2*Math.PI/n,s=d.cartesian2polar(t[0]-i[0],i[1]-t[1]),t[0]-i[0]<0&&(s[1]+=Math.PI),s[1]<0&&(s[1]+=2*Math.PI),l=s[1]-a/180*Math.PI+2*Math.PI,Math.abs(Math.cos(l%(h/2)))*o>s[0])return{polarIndex:c,valueIndex:Math.floor((l+h/2)/h)%n}}},getIndicator:function(t){var t=t||0;return this.polar[t].indicator},refresh:function(t){t&&(this.option=t,this.polar=this.option.polar,this.series=this.option.series),this.clear(),this._buildShape()}},l.inherits(e,i),t("../component").define("polar",e),e}),define("echarts/util/coordinates",["require","zrender/tool/math"],function(t){function e(t,e){return[t*o.sin(e),t*o.cos(e)]}function i(t,e){return[Math.sqrt(t*t+e*e),Math.atan(e/t)]}var o=t("zrender/tool/math");return{polar2cartesian:e,cartesian2polar:i}});